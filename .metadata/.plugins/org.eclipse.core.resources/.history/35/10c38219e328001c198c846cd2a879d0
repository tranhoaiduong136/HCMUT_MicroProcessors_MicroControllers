/*
 * Timer_Interrupt.c
 *
 *  Created on: Oct 8, 2021
 *      Author: Duong
 */
#include "main.h"
#include "Timer_Interrupt.h"
//change state global variable
int stateflag = 0;
// Timer delay variable
int timer0_flag = 0;

int getDelayState(){
	return timer0_flag;
}
int setTimer0(){
	return DELAY_TIME/TIMER_CYCLE;
}
int timerDELAY_run(int timer0_counter){
	if(timer0_counter > 0){
		timer0_counter--;
		if(timer0_counter == 0){
			return setTimer0();
		}
	}
	return timer0_counter;
}

int setTimerDot(){
	return DOT_TIME / TIMER_CYCLE;
}
int timerDot_run(int dot_count){
	dot_count--;
	if(dot_count <= 0){
		dot_count = DOT_TIME;
		HAL_GPIO_TogglePin(GPIOA, DOT);
		return setTimerDot();
	}
	return dot_count;
}
int getChangeStateLED(){
	return stateflag;
}
int setTimerLED(){
	return LED_TIME/ TIMER_CYCLE; // 500ms
}
int timerLED_run(int led_counter){
	led_counter--;
	if(led_counter <= 0){
		stateflag = 1;
		return setTimerLED();
	}
	// Normal
	stateflag = 0;
	return led_counter;
}

